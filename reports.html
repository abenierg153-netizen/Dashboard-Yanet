<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reports - Clinic Admin</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.34.0/dist/supabase.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-2xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html" class="text-gray-600 hover:text-blue-600 flex items-center">‚Üê Back</a>
      <h1 class="text-lg font-bold text-gray-800">Reports & Analytics</h1>
      <div></div>
    </div>
  </header>

  <!-- Reports Section -->
  <div x-data="reportsApp()" x-init="init()" class="max-w-2xl mx-auto px-4 py-6">

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
      <div class="bg-white rounded-xl shadow p-4 text-center">
        <h3 class="text-gray-500 text-xs">Total Appointments</h3>
        <p class="text-xl font-bold text-blue-600" x-text="appointments.length"></p>
      </div>
      <div class="bg-white rounded-xl shadow p-4 text-center">
        <h3 class="text-gray-500 text-xs">Total Patients</h3>
        <p class="text-xl font-bold text-green-600" x-text="patients.length"></p>
      </div>
      <div class="bg-white rounded-xl shadow p-4 text-center">
        <h3 class="text-gray-500 text-xs">Marketing Requests</h3>
        <p class="text-xl font-bold text-purple-600" x-text="marketing.length"></p>
      </div>
    </div>

    <!-- Tabs -->
    <div class="flex border-b mb-6 space-x-6 text-gray-600 text-sm">
      <button @click="activeTab = 'appointments'" 
              :class="activeTab==='appointments' ? 'text-blue-600 border-b-2 border-blue-600' : ''"
              class="pb-2">Appointments</button>
      <button @click="activeTab = 'patients'" 
              :class="activeTab==='patients' ? 'text-blue-600 border-b-2 border-blue-600' : ''"
              class="pb-2">Patients</button>
      <button @click="activeTab = 'marketing'" 
              :class="activeTab==='marketing' ? 'text-blue-600 border-b-2 border-blue-600' : ''"
              class="pb-2">Marketing</button>
    </div>

    <!-- Appointments Chart -->
    <div x-show="activeTab === 'appointments'" class="space-y-6">
      <div class="bg-white p-4 rounded-xl shadow">
        <h2 class="text-md font-semibold mb-4">Appointments by Status</h2>
        <div class="h-64">
          <canvas id="appointmentsChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Patients Chart -->
    <div x-show="activeTab === 'patients'" class="space-y-6">
      <div class="bg-white p-4 rounded-xl shadow">
        <h2 class="text-md font-semibold mb-4">New Patients by Month</h2>
        <div class="h-64">
          <canvas id="patientsChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Marketing Chart -->
    <div x-show="activeTab === 'marketing'" class="space-y-6">
      <div class="bg-white p-4 rounded-xl shadow">
        <h2 class="text-md font-semibold mb-4">Marketing Requests</h2>
        <div class="h-64">
          <canvas id="marketingChart"></canvas>
        </div>
      </div>
    </div>

  </div>

  <!-- Script stays the same as before -->
  <script>
    // ... same reportsApp() function with Supabase + Chart.js logic
  </script>
</body>
</html>
